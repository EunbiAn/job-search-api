<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.mapper.job.WishMapper">
	<!-- 로그인한 회원의 찜목록을 모두 return -->
	<select id="selectWishList" parameterType="Long" resultType="egovframework.job.vo.JobinfoResultVO">
        <!-- parameter : memberId -->
        SELECT J.j_id, J.d_date, C.c_name, C.address, C.c_type, J.job_type, J.employment_type, J.payment_type, J.payment, J.career, J.edu, J.r_date, J.detail
        FROM (JOBINFO J INNER JOIN COMPANY C ON J.c_num = C.c_num)
        LEFT JOIN WISH W
        ON J.j_id = W.j_num
        <where>
	        <if test="memberId != null">
	            AND W.m_num = #{memberId}
	        </if>
    	</where>
    </select>
    <insert id="createWish" parameterType="egovframework.job.vo.WishCreateVO">
        INSERT INTO WISH (m_num, j_num)
        VALUES (#{m_num}, #{j_num})
    </insert>
    
    <delete id="deleteWish" parameterType="egovframework.job.vo.WishCreateVO">
        DELETE FROM WISH
    	WHERE m_num = #{m_num} AND j_num = #{j_num};
    </delete>
</mapper>
